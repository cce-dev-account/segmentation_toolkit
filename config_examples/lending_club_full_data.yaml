# Lending Club Dataset - Full Data Training
# Uses ALL available data for training (no temporal split)
# Maximizes statistical power with ~944k training observations

name: "Lending Club Full Dataset Segmentation"
description: "Maximum statistical power analysis using all 1.3M observations with random 70/30 split"

# Data Configuration
data:
  source: "lending_club"     # Use built-in Lending Club loader
  data_type: "lending_club"  # Built-in loader handles schema properly
  sample_size: null          # Use ALL observations (full 1.3M+ dataset)
  use_oot: false             # DISABLE temporal split - use random 70/30 split instead
  random_state: 42

  # CATEGORICAL COLUMNS
  categorical_columns:
    - grade              # Lending Club grade (A-G)
    - home_ownership     # RENT, OWN, MORTGAGE, OTHER
    - purpose            # Loan purpose (debt_consolidation, credit_card, etc.)
    - term               # Loan term (36 months, 60 months)

# IRB Segmentation Parameters
irb_params:
  # Tree structure - sized for very large dataset
  max_depth: 5
  min_samples_split: 30000   # Increased for larger dataset
  min_samples_leaf: 15000    # Increased for larger dataset
  criterion: "gini"
  random_state: 42

  # IRB requirements - production scale
  min_defaults_per_leaf: 1000     # Increased (more data available)
  min_default_rate_diff: 0.01     # Require 1% PD difference
  significance_level: 0.01

  # Segment density
  min_segment_density: 0.05
  max_segment_density: 0.40

  # FORCED SPLITS
  # Use correct feature names from Lending Club loader
  forced_splits:
    interest_rate: 15.0         # Interest rate threshold (%)
    credit_score: 680           # FICO credit score threshold
    dti: 25.0                   # Debt-to-income ratio threshold
    grade_numeric: 5            # Grade threshold (7=A, 6=B, 5=C, 4=D, 3=E, 2=F, 1=G)

  # Monotone constraints (numeric features only)
  monotone_constraints:
    credit_score: 1             # Higher FICO = lower risk
    interest_rate: -1           # Higher rate = higher risk
    annual_income: 1            # Higher income = lower risk

  # Validation tests
  validation_tests:
    - chi_squared
    - psi
    - binomial

# Output Configuration
output:
  output_dir: "./output/lending_club_full_data"
  output_formats:
    - json
    - excel      # Excel output for business users
    - html
  create_dashboard: true
  create_excel_template: true
  extract_rules: true

# Workflow Settings
run_validation: true
verbose: true
